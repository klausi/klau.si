<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
  <head>
    <meta charset="utf-8" />
<meta name="Generator" content="Drupal 8 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<link rel="canonical" href="../node/47.html" />
<link rel="shortlink" href="../node/47.html" />
<link rel="revision" href="../node/47.html" />

    <title>Drupal development setup on Ubuntu 13.10 | Klausi&#039;s Weblog</title>
    <link rel="stylesheet" media="all" href="../files/css/css_c8uKrkdw3uTl-xXgGz0TtfMpOZq9ps2b3GoXRcXqFfo.css%3Fprerue.css" />
<link rel="stylesheet" media="all" href="https://fonts.googleapis.com/css?family=Lato|Inconsolata|Merriweather:400,400italic,700,700italic&amp;subset=latin,latin-ext" />
<link rel="stylesheet" media="all" href="../files/css/css_t3q8Jonmrz-ypDQ2jzBrUBWiKZmbJrFiETbsYp9gejU.css%3Fprerue.css" />

    
<!--[if lte IE 8]>
<script src="/files/js/js_VtafjXmRvoUgAzqzYTA3Wrjkx9wcWhjP0G4ZnnqRamA.js"></script>
<![endif]-->
<script src="../core/assets/vendor/modernizr/modernizr.min.js%3Fv=3.3.1"></script>

  </head>
  <body class="writer path-node page-node-type-story">
        <a href="170.html#main-content" class="visually-hidden focusable skip-link">
      Skip to main content
    </a>
    
      <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas>
    <div id="wrapper" class="wrapper" style="max-width: 630px;">
  
  <header role="banner" id="site-header">
  	<div class="head-wrap clearfix">
        <div class="region region-header">
    <div id="block-writer-branding" class="block block-system block-system-branding-block">
  
    
        <div class="logo-wrap">
      <a href="../index.html" title="Home" rel="home" id="logo">
        <img src="../files/uhura-drupal65_0.png" alt="Home" />
      </a>
    </div>
  
      <hgroup class="site-name-wrap">
              <h1 id="site-name">
          <a href="../index.html">Klausi&#039;s Weblog</a>
        </h1>
                    <h2 id="site-slogan">Trying to do a useful Blog</h2>
          </hgroup>
  </div>

  </div>

        <div class="region region-main-menu">
    <nav role="navigation" aria-labelledby="block-writer-main-menu-menu" id="block-writer-main-menu" class="block block-menu navigation menu--main">
            
  <h2 class="visually-hidden" id="block-writer-main-menu-menu">Main navigation</h2>
  

        
              <ul class="menu">
                    <li class="menu-item">
        <a href="../node/50.html" title="Drupal development setup on Ubuntu" data-drupal-link-system-path="node/50">Drupal dev on Ubuntu</a>
              </li>
                <li class="menu-item">
        <a href="../rss.xml" title="Subscribe to this feed to get updates on new blog posts" data-drupal-link-system-path="rss.xml">RSS feed</a>
              </li>
                <li class="menu-item">
        <a href="../node/51.html" data-drupal-link-system-path="node/51">speaking</a>
              </li>
                <li class="menu-item">
        <a href="../node/1.html" data-drupal-link-system-path="node/1">about</a>
              </li>
                <li class="menu-item">
        <a href="../node/53.html" title="contact klausi" data-drupal-link-system-path="node/53">contact</a>
              </li>
        </ul>
  


  </nav>

  </div>

	  </div>
  </header>

  

  
  <main role="main" class="main-content">
  	<a id="main-content"></a>
          <div id="highlighted">  <div class="region region-highlighted">
    <div data-drupal-messages-fallback class="hidden"></div>

  </div>
</div>
    
    
        

    
    

    
      <div class="region region-content">
    <div id="block-writer-page-title" class="block block-core block-page-title-block">
  
    
      
  <h1 class="page-title"><span class="field field--name-title field--type-string field--label-hidden">Drupal development setup on Ubuntu 13.10</span>
</h1>


  </div>
<div id="block-writer-easybreeze-system-main" class="block block-system block-system-main-block">
  
    
      
<article id="node-47" class=" " role="article" >

  <header>
    

    
          <div class="meta">
        <time class="submitted writer-date" datetime="2013-11-08 23:09:46" pubdate="pubdate">8 Nov 2013</time>
      </div>
    
  </header>

  <div class="node-main contextual-region">

    

    <div >
            
            <div class="clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item"><p>I upgraded my local computer to Ubuntu 13.10 today and revisited my Drupal development environment (this <a href="../node/42.html">guide is also available for Ubuntu 12.04</a>). Here is a simple and fast guide how to configure Ubuntu for development. There are a number of <a href="http://drupal.org/node/262">installation documentation pages on this topic on drupal.org</a>, but they suggest to use the packaged Drupal installation and to run Drupal in subfolders (e.g. http://localhost/drupal6). They also do not cover some other important development tools like Phpmyadmin or php.ini settings. During development we want to edit files and we want to do that somewhere in our home directory to avoid any permission problems. There is also <a href="http://drupal.org/project/drubuntu">Drubuntu</a>, but it is outdated and does way too much magic in my opinion. So here is a more transparent tutorial that highlights the key development configuration settings for Drupal development on a local computer (do not use this for a production server!).</p>
<!--break--><h2>Installation</h2>
<p>To install a web server and MySQL and PHP and all the dependencies we simply install the default Ubuntu drupal7 package:</p>
<div class="codeblock nowrap-expand"><code>sudo aptitude install drupal7</code></div>
<p>The installation will probably prompt you for a few things: Set a password for the MySQL root user. For the Postfix configuration you can select the "Local only" profile, so that no outgoing mail will be sent by PHP from your computer. For the postfix system mail name you can just leave it at your default hostname. The installation will probably prompt you to configure a default drupal database, but we will do that manually afterwards, so skip it.</p>
<p>We don't want to expose any of our sites to the outside world, so we limit Apache to only listen on the localhost interface. Edit <strong>/etc/apache2/ports.conf</strong> and replace "Listen 80" with "Listen 127.0.0.1:80".</p>
<div class="codeblock nowrap-expand"><code>Listen 127.0.0.1:80</code></div>
<p>We want Apache to run as our own user account to avoid any permission problems or conflicts when running drush or editing config files. Edit <strong>/etc/apache2/envvars</strong> and change the user to your account name. Example:</p>
<div class="codeblock nowrap-expand"><code>export APACHE_RUN_USER=klausi<br />export APACHE_RUN_GROUP=klausi</code></div>
<p>Enable the Rewrite mod and restart Apache.</p>
<div class="codeblock nowrap-expand"><code>sudo a2enmod rewrite<br />sudo service apache2 restart</code></div>
<p>Now we would like to have Phpmyadmin to easily create, inspect and manipulate MySQL databases.</p>
<div class="codeblock nowrap-expand"><code>sudo aptitude install phpmyadmin</code></div>
<p>The installation will probably prompt you for a few things: Confirm that you want to automatically configure a database with dbconfig-common. Select Apache as web server to configure automatically.</p>
<p>Now your Phpmyadmin installation should be reachable at http://localhost/phpmyadmin/ .</p>
<p>We will need some tools for development:</p>
<div class="codeblock nowrap-expand"><code>sudo aptitude install git php5-xdebug php5-curl</code></div>
<h2><a name="php.ini" id="php.ini">php.ini</a></h2>
<p>It is important to tune your /etc/php5/apache2/<strong>php.ini</strong> for development purposes to show all PHP warnings. I changed the following entries:</p>
<div class="codeblock nowrap-expand"><code>memory_limit = 256M<br />error_reporting = E_ALL<br />display_errors = On<br />display_startup_errors = On<br />track_errors = On<br />html_errors = On<br />session.gc_probability = 1</code></div>
<h2>Folder setup</h2>
<p>The next step is the setup of a workspace environment in my home folder where I will develop my Drupal projects. Example for my "drupal-8" development environment:</p>
<ul><li>Drupal root: /home/klausi/workspace/drupal-8</li>
<li>Apache config: /etc/apache2/sites-available/drupal-8.conf</li>
<li>Browser: http://drupal-8.localhost</li>
<li>Database: drupal-8</li>
</ul><p>Checkout Drupal 8:</p>
<div class="codeblock nowrap-expand"><code>cd ~<br />mkdir workspace<br />cd workspace<br />git clone --recursive --branch 8.x http://git.drupal.org/project/drupal.git drupal-8</code></div>
<h2>Apache config</h2>
<p>Create an Apache configuration for your drupal-8 folder at /etc/apache2/sites-available/drupal-8.conf:</p>
<div class="codeblock nowrap-expand"><code>&lt;VirtualHost *:80&gt;<br />        ServerAlias drupal-8.localhost<br />        DocumentRoot /home/klausi/workspace/drupal-8<br />        &lt;Directory "/home/klausi/workspace/drupal-8"&gt;<br />                Options FollowSymLinks<br />                AllowOverride All<br />                Require all granted<br />        &lt;/Directory&gt;<br />&lt;/VirtualHost&gt;</code></div>
<p>Enable the configuration and restart Apache:</p>
<div class="codeblock nowrap-expand"><code>sudo a2ensite drupal-8<br />sudo service apache2 restart</code></div>
<p>You might wonder why I do not use an <a href="http://randyfay.com/content/quick-guide-wildcard-apache-vhosts">Apache wildcard/catchall configuration</a>, here is the reason why: unfortunately the VirtualDocumentRoot directive requires that you modify your .htaccess in your Drupal installation (you have to enable the RewriteBase /). This is bad because then you always have local changes in that file if you are working with a Drupal core git checkout.</p>
<h2>localhost DNS</h2>
<p>Create the domain entry for drupal-8.localhost in /etc/hosts. Add "127.0.0.1  drupal-8.localhost". You will have to add each new project name in this file (you could also install Bind to automatically resolve this, but seems like an overkill to me).</p>
<p>I wrote a <a href="../sites/default/files/deploy-site.sh_.txt">simple bash script</a> that automatically creates the Apache site config and the site's hosts entry for me. Make sure to change the WORKDIR to your directory and run it like this:</p>
<div class="codeblock nowrap-expand"><code>sudo deploy-site.sh drupal-8</code></div>
<h2>Database</h2>
<p>Create the database in Phpmyadmin: Go to http://localhost/phpmyadmin , then "Privileges", then "Add a new User". Fill out the user name with "drupal-8", host localhost and generate a password (copy that password to use it later during the Drupal install process). Use the "Database for user" section and select "Create database with same name and grant all privileges".</p>
<h2>Install Drupal</h2>
<p>Now your Drupal installation should be reachable in your browser at http://drupal-8.localhost and you can start the installation. Done!</p>
<p>You can also use <a href="https://github.com/drush-ops/drush">drush</a> to install Drupal from the command line:</p>
<div class="codeblock nowrap-expand"><code>drush site-install --account-name=klausi --account-pass=klausi --site-name=drupal-8.localhost</code></div>
<h2>Development tips</h2>
<ul><li>I highly recommend using an IDE for source code editing such as Netbeans or Phpstorm. Drupal is spread over thousands of files and shortcuts to jump to other files are a real time saver, same for code completion as you type. And having a debugger to step through the code is very helpful.</li>
<li>You want to speed up MySQL because you don't care about your local development databases anyway? Put <a href="http://wolfgangziegler.net/ubuntu-11.04-simpletest-performance-upstart-mysql-ramdisk">MySQL on a RAM disc that syncs back to your hard drive on start/stop</a>.</li>
<li>You want to examine mails that Drupal sends out? <a href="http://www.drupal4hu.com/node/55">Configure PHP to write outgoing mails to temporary files</a>.</li>
<li>You like the command line? Check out <a href="https://github.com/drush-ops/drush">drush</a> to do all sorts of Drupal administration tasks faster.</li>
<li>You want to know what's going on in that stupid function? Install the <a href="http://drupal.org/project/devel">devel module</a> for debugging purposes and insert <code>dpm($variable);</code> anywhere you want. It will pretty-print the variable in the browser for inspection.</li>
</ul></div>
      
      <div class="field field--name-upload field--type-file field--label-hidden field__items">
              <div class="field__item"><table data-striping="1">
  
  
      <thead>
      <tr>
                            <th>Attachment</th>
                            <th>Size</th>
              </tr>
    </thead>
  
      <tbody>
                      <tr class="odd">
                      <td>
<span class="file file--mime-text-plain file--text"> <a href="../sites/default/files/deploy-site.sh_.txt" type="text/plain; length=674">deploy-site.sh_.txt</a></span>
</td>
                      <td>674 bytes</td>
                  </tr>
          </tbody>
    </table>
</div>
          </div>
  
  <div class="field field--name-taxonomy-vocabulary-1 field--type-entity-reference field--label-above">
    <div class="field__label">Categories</div>
          <div class="field__items">
              <div class="field__item"><a href="../taxonomy/term/6.html" hreflang="en">Drupal</a></div>
          <div class="field__item"><a href="../taxonomy/term/7.html" hreflang="en">Drupal planet</a></div>
              </div>
      </div>
<section class="comments field field--name-comment-node-story field--type-comment field--label-above comment-wrapper">
      
    <h2 class="title">Comments</h2>
    
  
  <article  data-comment-user-id="0" id="comment-151" class="comment">
  
  <h3><a href="151.html#comment-151" class="permalink" rel="bookmark" hreflang="en">A typo:</a></h3>
  

  <div class="submitted">On <time datetime="2014-02-19 14:57:23">19 Feb 2014</time>, <span>Alex</span> said...</div>
    
  <div>
        
            <div class="clearfix text-formatted field field--name-comment-body field--type-text-long field--label-hidden field__item"><p>A typo:<br />
/etc/apache2/site-available/drupal-8.conf &gt; /etc/apache2/sites-available/drupal-8.conf</p></div>
      

    
    </div>

  <ul class="links inline"><li class="comment-forbidden"></li></ul>
</article>

<div class="indented"><article  data-comment-user-id="1" id="comment-152" class="comment">
  
  <h3><a href="152.html#comment-152" class="permalink" rel="bookmark" hreflang="en">Fixed, thanks!</a></h3>
  

  <div class="submitted">On <time datetime="2014-02-19 16:24:42">19 Feb 2014</time>, <span>klausi</span> said...</div>
        <p class="parent visually-hidden">In reply to <a href="151.html#comment-151" class="permalink" rel="bookmark" hreflang="en">A typo:</a> by <span>Alex</span></p>
  
  <div>
        
            <div class="clearfix text-formatted field field--name-comment-body field--type-text-long field--label-hidden field__item"><p>Fixed, thanks!</p></div>
      

    
    </div>

  <ul class="links inline"><li class="comment-forbidden"></li></ul>
</article>
</div><article  data-comment-user-id="0" id="comment-154" class="comment">
  
  <h3><a href="154.html#comment-154" class="permalink" rel="bookmark" hreflang="en">aptitude</a></h3>
  

  <div class="submitted">On <time datetime="2014-03-15 19:27:26">15 Mar 2014</time>, <a rel="nofollow" href="http://openspring.net/" class="username">scor</a> said...</div>
    
  <div>
        
            <div class="clearfix text-formatted field field--name-comment-body field--type-text-long field--label-hidden field__item"><p>For those not familiar with aptitude: note that Ubuntu 13.10 (at least with the way I installed it), didn't come with aptitude installed by default, so I needed to run this before I could follow the instructions:<br />
sudo apt-get install aptitude</p>
<p>You can alternatively use "apt-get" instead of "aptitude" in the commands of this tutorial.</p>
<p>Also, your link to deploy-site.sh contains a # fragment at the end.</p></div>
      

    
    </div>

  <ul class="links inline"><li class="comment-forbidden"></li></ul>
</article>

<div class="indented"><article  data-comment-user-id="1" id="comment-155" class="comment">
  
  <h3><a href="155.html#comment-155" class="permalink" rel="bookmark" hreflang="en">Yes, of course apt-get works</a></h3>
  

  <div class="submitted">On <time datetime="2014-03-16 01:16:20">16 Mar 2014</time>, <span>klausi</span> said...</div>
        <p class="parent visually-hidden">In reply to <a href="154.html#comment-154" class="permalink" rel="bookmark" hreflang="en">aptitude</a> by <a rel="nofollow" href="http://openspring.net/" class="username">scor</a></p>
  
  <div>
        
            <div class="clearfix text-formatted field field--name-comment-body field--type-text-long field--label-hidden field__item"><p>Yes, of course apt-get works as well. Removed the link fragment, thanks!</p></div>
      

    
    </div>

  <ul class="links inline"><li class="comment-forbidden"></li></ul>
</article>
</div><article  data-comment-user-id="0" id="comment-158" class="comment">
  
  <h3><a href="158.html#comment-158" class="permalink" rel="bookmark" hreflang="en">Subject</a></h3>
  

  <div class="submitted">On <time datetime="2014-04-24 22:18:18">24 Apr 2014</time>, <span>mixxxa</span> said...</div>
    
  <div>
        
            <div class="clearfix text-formatted field field--name-comment-body field--type-text-long field--label-hidden field__item"><p>So good <a href="http://site.ru"> </a></p></div>
      

    
    </div>

  <ul class="links inline"><li class="comment-forbidden"></li></ul>
</article>
<article  data-comment-user-id="0" id="comment-159" class="comment">
  
  <h3><a href="159.html#comment-159" class="permalink" rel="bookmark" hreflang="en">phpMyAdmin</a></h3>
  

  <div class="submitted">On <time datetime="2014-05-02 08:46:11">2 May 2014</time>, <span>Eben</span> said...</div>
    
  <div>
        
            <div class="clearfix text-formatted field field--name-comment-body field--type-text-long field--label-hidden field__item"><p>I have got most of this working, but I can't import existing data bases either through phpMyAdmin or mysql command. In phpMyAdmin it gives the following error: "Warning: Unknown: open_basedir restriction in effect. File(/tmp) is not within the allowed path(s): (/usr/share/phpmyadmin/:/etc/phpmyadmin/:/var/lib/phpmyadmin/:/usr/share/php/php-gettext/:/usr/share/javascript/) in Unknown on line 0"<br />
Also I'm now on ubuntu 14.04 not 13.10. Any ideas would be great. After reading around it looks like the problem may have something to do with apache using my own name and group. But I'm not shore how to resolve this as I would like to use the setup you posted above. Also thanks for the bash script it works great.</p></div>
      

    
    </div>

  <ul class="links inline"><li class="comment-forbidden"></li></ul>
</article>
<article  data-comment-user-id="0" id="comment-166" class="comment">
  
  <h3><a href="166.html#comment-166" class="permalink" rel="bookmark" hreflang="en">http://klau.si/sites/default</a></h3>
  

  <div class="submitted">On <time datetime="2014-11-05 12:40:39">5 Nov 2014</time>, <span>Alex</span> said...</div>
    
  <div>
        
            <div class="clearfix text-formatted field field--name-comment-body field--type-text-long field--label-hidden field__item"><p><a href="../sites/default/files/deploy-site.sh_.txt">http://klau.si/sites/default/files/deploy-site.sh_.txt</a>  &gt;  403 Forbidden</p></div>
      

    
    </div>

  <ul class="links inline"><li class="comment-forbidden"></li></ul>
</article>
<article  data-comment-user-id="0" id="comment-167" class="comment">
  
  <h3><a href="167.html#comment-167" class="permalink" rel="bookmark" hreflang="en">First of all thanks for this</a></h3>
  

  <div class="submitted">On <time datetime="2014-12-14 12:17:31">14 Dec 2014</time>, <span>NexusStar</span> said...</div>
    
  <div>
        
            <div class="clearfix text-formatted field field--name-comment-body field--type-text-long field--label-hidden field__item"><p>First of all thanks for this tutorial it was verry helpful.<br />
In order to work for me I changed start of drupal-8.conf from  <code>VirtualHost *:80</code> to  <code>VirtualHost drupal-8.localhost:80</code> and add <code>ServerName drupal-8.localhost</code><br />
Otherwise it shows default apache2 homepage instead of the virtual host home page. Also in order to be able to edit files in IDE (PhpStorm in my case) I added the user I used to www-data group and change user:group of files to <code>:www-data</code>. The last part was a real bummer since I come from Windows background</p></div>
      

    
    </div>

  <ul class="links inline"><li class="comment-forbidden"></li></ul>
</article>
<article  data-comment-user-id="0" id="comment-170" class="comment">
  
  <h3><a href="170.html#comment-170" class="permalink" rel="bookmark" hreflang="en">Hello, thanks for this</a></h3>
  

  <div class="submitted">On <time datetime="2015-06-16 23:18:46">16 Jun 2015</time>, <span>molenick</span> said...</div>
    
  <div>
        
            <div class="clearfix text-formatted field field--name-comment-body field--type-text-long field--label-hidden field__item"><p>Hello, thanks for this article.  I made a few modifications to deploy-site.sh so that it can have a different hostname and folder name.  This is useful because a lot of people I collaborate choose to have Drupal in a sub "docs" folder of the git root.  It's hosted in this repo: <a href="https://github.com/molenick/kubuntu-drupal-dev-setup">https://github.com/molenick/kubuntu-drupal-dev-setup</a>.</p>
<p>Cheers!</p></div>
      

    
    </div>

  <ul class="links inline"><li class="comment-forbidden"></li></ul>
</article>


  
</section>

    </div>

          <footer class="link-wrapper">
          <div class="node__links">
    <ul class="links inline"><li class="comment-forbidden"></li></ul>  </div>

      </footer>
    
    
  </div>

</article>

  </div>

  </div>

  </main>

  <footer class="page-footer">
  	  <div class="region region-footer-top">
    <nav role="navigation" aria-labelledby="block-categories-menu" id="block-categories" class="block block-menu navigation menu--secondary-menu">
      
  <h2 id="block-categories-menu">Categories</h2>
  

        
              <ul class="menu">
                    <li class="menu-item">
        <a href="../taxonomy/term/6.html" title="
" data-drupal-link-system-path="taxonomy/term/6">Drupal</a>
              </li>
                <li class="menu-item">
        <a href="../taxonomy/term/1.html" title="" data-drupal-link-system-path="taxonomy/term/1">Freizeit</a>
              </li>
                <li class="menu-item">
        <a href="../taxonomy/term/2.html" title="" data-drupal-link-system-path="taxonomy/term/2">Gesellschaftskritik</a>
              </li>
                <li class="menu-item">
        <a href="../taxonomy/term/3.html" title="" data-drupal-link-system-path="taxonomy/term/3">Software</a>
              </li>
                <li class="menu-item">
        <a href="../taxonomy/term/5.html" title="" data-drupal-link-system-path="taxonomy/term/5">Uni</a>
              </li>
                <li class="menu-item">
        <a href="../taxonomy/term/4.html" title="" data-drupal-link-system-path="taxonomy/term/4">Uncategorized</a>
              </li>
        </ul>
  


  </nav>
<div id="block-writer-easybreeze-block-3" class="block block-block-content block-block-content31e9598c-b49e-4c82-af38-e5c72a6fb0c7">
  
    
      
            <div class="clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item"><p><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />This work by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Klaus Purer</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p>
</div>
      
  </div>

  </div>

  	  	
  	<div class="foot-wrap clearfix">
                </div>
  </footer>
</div> <!-- end wrapper -->

  </div>

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"comment\/170","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en","currentQuery":{"page":0}},"pluralDelimiter":"\u0003","user":{"uid":0,"permissionsHash":"e96a7765a53cb802146dc48da3834d3a470ce957d28868afe583adf3bec8d6c5"}}</script>
<script src="../files/js/js_JdSNpE3Gh7Tv0XWwuGvbXkjYUqrXVCBIZ_Pf8-3EN4M.js"></script>

  </body>
</html>
