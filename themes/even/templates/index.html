{% import "post_macros.html" as post_macros %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1">

    <title>
      {% block title %}
        {{ config.title }}
      {% endblock title %}
    </title>

    {% block rss %}
      <link rel="alternate"
            type="application/rss+xml"
            title="RSS"
            href="{{ get_url(path='rss.xml', trailing_slash=false) }}">
    {% endblock %}

    {% block js %}
      <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
      {% if config.extra.katex_enable %}
        <link rel="stylesheet"
              href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css"
              integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y"
              crossorigin="anonymous">

        <script defer
                src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js"
                integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx"
                crossorigin="anonymous"></script>
        <script defer
                src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/mathtex-script-type.min.js"
                integrity="sha384-zWYbd0NBwgTsgIdFKVprSfTh1mbMPe5Hz1X3yY4Sd1h/K1cQoUe36OGwAGz/PcDy"
                crossorigin="anonymous"></script>
        {% if config.extra.katex_auto_render %}
          <script defer
                  src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js"
                  integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe"
                  crossorigin="anonymous"
                  onload="renderMathInElement(document.body);"></script>
        {% endif %}
      {% endif %}
    {% endblock js %}

    {% block css %}
      <link rel="stylesheet"
            href="{{ get_url(path='site.css', trailing_slash=false) }}">
      {% if config.extra.katex_enable %}
        <link rel="stylesheet"
              href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css"
              integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y"
              crossorigin="anonymous">
      {% endif %}
    {% endblock css %}

    {% block extra_head %}
    {% endblock extra_head %}
  </head>

  <body>
    <div class="container">

      <div id="mobile-navbar" class="mobile-navbar">
        <div class="mobile-header-logo">
          <a href="{{ config.base_url }}"
             title="{{ config.extra.even_title }}"
             rel="home"
             class="site-logo site-title">
            <img src="{{ get_url(path='logo.png') }}"
                 alt="{{ config.extra.even_title }} logo">
          </a>
          <a href="/" class="logo">{{ config.extra.even_title }}</a>
        </div>
        <div class="mobile-navbar-icon icon-out">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>

      <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
        <ul class="mobile-menu-list">
          {% for item in config.extra.even_menu %}
            <li class="mobile-menu-item">
              <a href="{{ item.url | replace(from='$BASE_URL', to=config.base_url) }}">
                {{ item.name }}
                {% if item.name == "RSS" %}

                  <img src="{{ get_url(path='icons/rss-icon.svg') }}"
                       alt="RSS icon"
                       style="vertical-align: middle;
                              width: 16px;
                              height: 16px;
                              position: relative;
                              top: -2px">
                {% endif %}
              </a>
            </li>
          {% endfor %}
        </ul>
      </nav>

      <header id="header">
        <div class="logo">
          <a href="{{ config.base_url }}"
             title="{{ config.extra.even_title }}"
             rel="home"
             class="site-logo site-title">
            <img src="{{ get_url(path='logo.png') }}"
                 alt="{{ config.extra.even_title }} logo">
          </a>
          <a href="{{ config.base_url }}">{{ config.extra.even_title }}</a>
        </div>
        <nav class="menu">
          <ul>
            {% for item in config.extra.even_menu %}
              <li>
                <a href="{{ item.url | replace(from='$BASE_URL', to=config.base_url) }}">
                  {{ item.name }}
                  {% if item.name == "RSS" %}

                    <img src="{{ get_url(path='icons/rss-icon.svg') }}"
                         alt="RSS icon"
                         style="vertical-align: middle;
                                width: 16px;
                                height: 16px;
                                position: relative;
                                top: -2px">
                  {% endif %}
                </a>
              </li>
            {% endfor %}
          </ul>
        </nav>
      </header>

      <main>
        <div class="content" id="mobile-panel">
          {% block content %}

            {% if not paginator.previous %}<div class="about">{{ section.content | safe }}</div>{% endif %}

            <div class="posts">
              {% for page in paginator.pages %}
                <article class="post">
                  {{ post_macros::title(page=page) }}
                  <div class="post__summary">{{ page.summary | safe }}</div>
                  <div class="read-more">
                    <a href="{{ page.permalink }}">Read more...</a>
                  </div>
                </article>
              {% endfor %}
            </div>
            <nav class="pagination">
              {% if paginator.previous %}<a class="previous" href="{{ paginator.previous }}">‹ Previous</a>{% endif %}
              {% if paginator.next %}<a class="next" href="{{ paginator.next }}">Next ›</a>{% endif %}
            </nav>
          {% endblock content %}
        </div>
      </main>

      {% block footer %}
        <footer>
          <ul class="footer-social">
            <li>
              <a href="https://mastodon.social/@klausi" title="Mastodon" rel="me">
                <img src="{{ get_url(path='icons/mastodon.svg') }}"
                     alt="Mastodon icon"
                     class="social-icon"
                     width="24"
                     height="24">
                <span>Human social media</span>
              </a>
            </li>
            <li>
              <a href="https://www.drupal.org/u/klausi" title="Drupal" rel="me">
                <img src="{{ get_url(path='icons/drupal.svg') }}"
                     alt="Drupal icon"
                     class="social-icon"
                     width="24"
                     height="24">
                <span>Drupal profile</span>
              </a>
            </li>
            <li>
              <a href="https://github.com/klausi" title="GitHub" rel="me">
                <img src="{{ get_url(path='icons/github.svg') }}"
                     alt="GitHub icon"
                     class="social-icon"
                     width="24"
                     height="24">
                <span>Stalk my code</span>
              </a>
            </li>
            <li>
              <a href="https://bsky.app/profile/klau.si" title="Bluesky" rel="me">
                <img src="{{ get_url(path='icons/bluesky.svg') }}"
                     alt="Bluesky icon"
                     class="social-icon"
                     width="24"
                     height="24">
                <span>Fake Twitter funded by crypto bros</span>
              </a>
            </li>
            <li>
              <a href="https://www.linkedin.com/in/klausi" title="LinkedIn" rel="me">
                <img src="{{ get_url(path='icons/linkedin.svg') }}"
                     alt="LinkedIn icon"
                     class="social-icon"
                     width="24"
                     height="24">
                <span>The business hellsite</span>
              </a>
            </li>
            <li>
              <a href="{{ get_url(path='rss.xml', trailing_slash=false) }}"
                 title="RSS Feed">
                <img src="{{ get_url(path='icons/rss-icon.svg') }}"
                     alt="RSS icon"
                     class="social-icon"
                     width="24"
                     height="24">
                <span>RSS</span>
              </a>
            </li>
          </ul>
          <p class="footer-license">
            <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
              <img alt="Creative Commons License"
                   style="border-width:0"
                   src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" />
            </a>
            <br />
            This work by
            <span xmlns:cc="http://creativecommons.org/ns#"
                  property="cc:attributionName">Klaus Purer</span> is licensed
            under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons
            Attribution-ShareAlike 4.0 International License</a>.
          </p>
        </footer>
      {% endblock footer %}
    </div>

    {% block js_body %}
      <script type="text/javascript"
              src="{{ get_url(path="even.js", trailing_slash=false) }}"></script>
    {% endblock js_body %}
  </body>

</html>
